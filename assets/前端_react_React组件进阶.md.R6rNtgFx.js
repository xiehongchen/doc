import{_ as s,c as i,o as a,a5 as t,bh as n,bi as p,bj as l,bk as h}from"./chunks/framework.Dxa1IzfX.js";const b=JSON.parse('{"title":"React组件进阶","description":"","frontmatter":{},"headers":[],"relativePath":"前端/react/React组件进阶.md","filePath":"前端/react/React组件进阶.md","lastUpdated":1727192802000}'),e={name:"前端/react/React组件进阶.md"},k=t('<h1 id="react组件进阶" tabindex="-1">React组件进阶 <a class="header-anchor" href="#react组件进阶" aria-label="Permalink to &quot;React组件进阶&quot;">​</a></h1><h2 id="children属性" tabindex="-1">children属性 <a class="header-anchor" href="#children属性" aria-label="Permalink to &quot;children属性&quot;">​</a></h2><p><strong>children属性是什么</strong></p><p>表示该组件的子节点，只要组件内部有子节点，props中就有该属性</p><p><strong>children可以是什么</strong></p><ol><li>普通文本</li><li>普通标签元素</li><li>函数 / 对象</li><li>JSX</li></ol><h2 id="props校验-场景和使用" tabindex="-1">props校验-场景和使用 <a class="header-anchor" href="#props校验-场景和使用" aria-label="Permalink to &quot;props校验-场景和使用&quot;">​</a></h2><p><code>目标任务:</code> 掌握组件props的校验写法，增加组件的健壮性</p><p>对于组件来说，props是由外部传入的，我们其实无法保证组件使用者传入了什么格式的数据，如果传入的数据格式不对，就有可能会导致组件内部错误，有一个点很关键 - <strong>组件的使用者可能报错了也不知道为什么</strong>，看下面的例子</p><p><img src="'+n+`" alt="img" loading="lazy"></p><p>面对这样的问题，如何解决？ <strong>props校验</strong></p><p><strong>实现步骤</strong></p><ol><li>安装属性校验包：<code>yarn add prop-types</code></li><li>导入<code>prop-types</code> 包</li><li>使用 <code>组件名.propTypes = {}</code> 给组件添加校验规则</li></ol><p><strong>核心代码</strong></p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PropTypes </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;prop-types&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> List</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> props</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> arr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> props.colors</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> lis</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> arr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{index}&gt;{item.name}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{lis}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">List.propTypes </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  colors: PropTypes.array</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="props校验-规则说明" tabindex="-1">props校验-规则说明 <a class="header-anchor" href="#props校验-规则说明" aria-label="Permalink to &quot;props校验-规则说明&quot;">​</a></h2><p><code>目标任务:</code> 掌握props常见的规则</p><p><strong>四种常见结构</strong></p><ol><li>常见类型：array、bool、func、number、object、string</li><li>React元素类型：element</li><li>必填项：isRequired</li><li>特定的结构对象：shape({})</li></ol><p><strong>核心代码</strong></p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 常见类型</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">optionalFunc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: PropTypes.func,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 必填 只需要在类型后面串联一个isRequired</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">requiredFunc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: PropTypes.func.isRequired,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 特定结构的对象</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">optionalObjectWithShape</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: PropTypes.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">shape</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	color: PropTypes.string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	fontSize: PropTypes.number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>官网文档更多阅读：<a href="https://reactjs.org/docs/typechecking-with-proptypes.html" target="_blank" rel="noreferrer">https://reactjs.org/docs/typechecking-with-proptypes.html</a></p><h2 id="props校验-默认值" tabindex="-1">props校验-默认值 <a class="header-anchor" href="#props校验-默认值" aria-label="Permalink to &quot;props校验-默认值&quot;">​</a></h2><p><code>目标任务:</code> 掌握如何给组件的props提供默认值</p><p>通过 <code>defaultProps</code> 可以给组件的props设置默认值，在未传入props的时候生效</p><h3 id="_1-函数组件" tabindex="-1">1. 函数组件 <a class="header-anchor" href="#_1-函数组件" aria-label="Permalink to &quot;1. 函数组件&quot;">​</a></h3><p>直接使用函数参数默认值</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">pageSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      此处展示props的默认值：{ pageSize }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 不传入pageSize属性</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span></code></pre></div><h3 id="_2-类组件" tabindex="-1">2. 类组件 <a class="header-anchor" href="#_2-类组件" aria-label="Permalink to &quot;2. 类组件&quot;">​</a></h3><p>使用类静态属性声明默认值，<code>static defaultProps = {}</code></p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> List</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  static</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> defaultProps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    pageSize: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        此处展示props的默认值：{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.props.pageSize}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span></code></pre></div><h2 id="生命周期-概述" tabindex="-1">生命周期 - 概述 <a class="header-anchor" href="#生命周期-概述" aria-label="Permalink to &quot;生命周期 - 概述&quot;">​</a></h2><p><code>目标任务:</code> 能够说出组件生命周期一共几个阶段</p><p>组件的生命周期是指组件从被创建到挂载到页面中运行起来，再到组件不用时卸载的过程，注意，只有类组件才有生命周期（类组件 实例化 函数组件 不需要实例化）</p><p><img src="`+p+'" alt="img" loading="lazy"></p><p><a href="http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" target="_blank" rel="noreferrer">http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/</a></p><h2 id="生命周期-挂载阶段" tabindex="-1">生命周期 - 挂载阶段 <a class="header-anchor" href="#生命周期-挂载阶段" aria-label="Permalink to &quot;生命周期 - 挂载阶段&quot;">​</a></h2><p><code>目标任务:</code> 能够说出在组件挂载阶段执行的钩子函数和执行时机</p><p><img src="'+l+'" alt="img" loading="lazy"></p><table><thead><tr><th>钩子 函数</th><th>触发时机</th><th>作用</th></tr></thead><tbody><tr><td>constructor</td><td>创建组件时，最先执行，初始化的时候只执行一次</td><td>1. 初始化state 2. 创建 Ref 3. 使用 bind 解决 this 指向问题等</td></tr><tr><td>render</td><td>每次组件渲染都会触发</td><td>渲染UI（<strong>注意： 不能在里面调用setState()</strong> ）</td></tr><tr><td>componentDidMount</td><td>组件挂载（完成DOM渲染）后执行，初始化的时候执行一次</td><td>1. 发送网络请求 2.DOM操作</td></tr></tbody></table><h2 id="生命周期-更新阶段" tabindex="-1">生命周期 - 更新阶段 <a class="header-anchor" href="#生命周期-更新阶段" aria-label="Permalink to &quot;生命周期 - 更新阶段&quot;">​</a></h2><p><code>目标任务:</code> 能够说出组件的更新阶段的钩子函数以及执行时机</p><p><img src="'+h+'" alt="img" loading="lazy"></p><table><thead><tr><th>钩子函数</th><th>触发时机</th><th>作用</th></tr></thead><tbody><tr><td>render</td><td>每次组件渲染都会触发</td><td>渲染UI（与 挂载阶段 是同一个render）</td></tr><tr><td>componentDidUpdate</td><td>组件更新后（DOM渲染完毕）</td><td>DOM操作，可以获取到更新后的DOM内容，<strong>不要直接调用setState</strong></td></tr></tbody></table><h2 id="生命周期-卸载阶段" tabindex="-1">生命周期 - 卸载阶段 <a class="header-anchor" href="#生命周期-卸载阶段" aria-label="Permalink to &quot;生命周期 - 卸载阶段&quot;">​</a></h2><p><code>目标任务:</code> 能够说出组件的销毁阶段的钩子函数以及执行时机</p><table><thead><tr><th>钩子函数</th><th>触发时机</th><th>作用</th></tr></thead><tbody><tr><td>componentWillUnmount</td><td>组件卸载（从页面中消失）</td><td>执行清理工作（比如：清理定时器等）</td></tr></tbody></table>',47),r=[k];function d(o,E,c,g,y,F){return a(),i("div",null,r)}const m=s(e,[["render",d]]);export{b as __pageData,m as default};
